# 表に関する追加仕様

元メモ: `out/administrators-memos/表に関する追加仕様.txt`

## 背景
- 既存要件として、法令アイテム選択時に親・先祖を表示し、文脈を失わないことが重要。
- 同じ考え方を Markdown table にも適用し、表レコード選択時の文脈表示を可能にする。
- さらに表だけでなく、条文/ガイドライン本文でも「本人より後ろに来る子・子孫」を設定で同時表示できるようにする。

## 要件（3点）
1. 表のレコードを選択可能アイテムにする。  
   入力表現は Markdown table を前提とする。
2. 表のタイトル・ヘッダ（HTML table の `th` 相当）を、選択レコードの親/先祖として表示可能にする。
3. 表下の注記（note/脚注）を、選択レコードに対して子/子孫として表示可能にする。  
   3) は表に限らず、条文/ガイドライン本文でも適用し、後続する子・子孫の同時表示を可能にする。

## 表構造の扱い
- 表タイトル: `table.heading` として扱う（祖先文脈）。
- 表ヘッダ: `table_header` ノードとして扱う（祖先文脈）。
- 表レコード: `table_row` ノードとして扱う（選択対象）。
- 表注記: `note` ノードとして table 配下にぶら下げる（子孫文脈）。

## 条文構造への一般化
- 先祖表示に加えて、子孫表示を `regdoc_profile` の宣言的設定で制御できるようにする。
- 例: `include_descendants`, `include_descendants_of`, `include_descendants_kinds`, `include_descendants_max_depth`。

## 参考（元メモ抜粋）
- 「表の2レコードとともに、親の表のタイトルとヘッダを表示」
- 「表下の注記等（子・子孫）を一緒に表示」
- 「表だけでなく条文にも同様仕様を適用」
