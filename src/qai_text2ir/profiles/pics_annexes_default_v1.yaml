schema: qai.parser_profile.v1
id: pics_annexes_default_v1
title: "PIC/S PE 009-17 Annexes (full document) markers"
extends: pics_pe00917_common_v1
applies_to:
  family: PICS
  jurisdiction: INTL
  defaults: false
language: en
source_label: "PIC/S"
context_root_kind: annex
structural_kinds: [annex]

preprocess:
  skip_blocks:
    - start_regex: '(?i)^\s*TABLE\s+OF\s+CONTENTS?\s*$'
      end_regex: '^\s*ANNEX\s+1(?:\s+[A-Z][A-Z\s]{3,})?\s*$'
      include_start: false
      include_end: true
      max_lines: 4000

  drop_line_regexes:
    - '^\s*\d{1,3}\s*$'
    - '^\s*Annex\s+\d+[A-Z]?\s+[A-Za-z].{0,200}\s*$'

  merge_structural_heading_continuations:
    enabled: true
    kinds: [annex]
    max_next_line_len: 220
    max_merge_lines: 4
    max_blank_lookahead: 3

  drop_repeated_structural_headers:
    enabled: true
    kinds: [annex]

marker_types:
  - id: annex
    kind: annex
    kind_raw: "ANNEX"
    match: '^\s*ANNEX\s+(?P<n>\d+[A-Z]?)(?=\s*$|\s+[A-Z][A-Z0-9\s,&()/\-]{2,}\s*$)'
    num_group: n

structure:
  root:
    children: [annex]
  annex:
    children: [note, history]
  note:
    children: []
  history:
    children: []

compound_prefix:
  enabled: false
  max_depth: 1
