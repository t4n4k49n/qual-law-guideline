schema: qai.parser_profile.v1
id: pics_part2_default_v1
title: PIC/S PE 009-17 Part II markers (API GMP)
extends: pics_pe00917_common_v1
applies_to:
  family: PICS
  jurisdiction: INTL
  defaults: false
language: en
source_label: "PIC/S"
context_root_kind: chapter
structural_kinds: [chapter]

preprocess:
  skip_blocks:
    - start_regex: '(?i)^TABLE OF CONTENTS\s*$'
      end_regex: '^1\.\s+INTRODUCTION\s*$'
      include_start: false
      include_end: true
      max_lines: 2000
  drop_line_regexes:
    - '(?i)^\s*PE\s*009-17\s*\(Part\s+II\)\s*-\s*(?:\d{1,3}|[ivxlcdm]+)\s*-\s*25\s+August\s+2023\s*$'
    - '^\s*_{5,}\s*Introduction\s*$'
  strip_inline_regexes:
    - '[\x00-\x08\x0B\x0C\x0E-\x1F]'
  merge_structural_heading_continuations:
    enabled: true
    kinds: ["chapter"]
    max_next_line_len: 120
    max_merge_lines: 2
    max_blank_lookahead: 2
  drop_repeated_structural_headers:
    enabled: true
    kinds: ["chapter"]

marker_types:
  - id: chapter_num_dot_caps
    kind: chapter
    kind_raw: "1."
    match: '^(?P<n>\d{1,2})\.\s+(?=[A-Za-z][A-Za-z0-9\s/&,\-\(\)]+\s*$)'
    num_group: n
  - id: section_one_digit
    kind: section
    kind_raw: "1.1"
    match: '^(?P<n>\d{1,2}\.\d)(?!\d)\s+'
    num_group: n
  - id: paragraph_two_digits
    kind: paragraph
    kind_raw: "2.19"
    match: '^(?P<n>\d{1,2}\.\d{2})\s+'
    num_group: n
  - id: item_list_num
    kind: item
    kind_raw: "1."
    match: '^(?P<n>\d{1,2})\.\s+(?=[A-Za-z])'
    num_group: n
  - id: bullet
    kind: subitem
    kind_raw: ""
    match: '^\s*[•]\s+'

structure:
  root:
    children: [chapter]
  chapter:
    children: [section, paragraph, item, subitem, note, history]
  section:
    children: [paragraph, item, subitem, note, history]
  paragraph:
    children: [item, subitem, note, history]
  item:
    children: [subitem, note, history]
  subitem:
    children: [note, history]
  note:
    children: []
  history:
    children: []

compound_prefix:
  enabled: false
  max_depth: 1
